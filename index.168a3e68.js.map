{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAGAC,KAAKC,oBAAmB,SAAAC,GAClBA,EACFC,GAAGC,WAAW,UAAUC,YACtB,SAAAC,GACEC,YAAYD,EAASE,MACrBC,QAAQP,MAEV,SAAAQ,G,OAAOC,QAAQC,IAAIF,EAAIG,aAGzBJ,UACAF,YAAY,QAKhB,IAAMO,EAAaC,SAASC,cAAc,gBAC1CF,EAAWG,iBAAiB,UAAU,SAAAC,GACpCA,EAAEC,iBAGF,IAAMC,EAAQN,EAAW,gBAAgBO,MACnCC,EAAWR,EAAW,mBAAmBO,MAG/CrB,KACGuB,+BAA+BH,EAAOE,GACtCE,MAAK,SAAAC,GACJ,OAAOtB,GAAGC,WAAW,SAASsB,IAAID,EAAKvB,KAAKyB,KAAKC,IAAI,CACnDC,IAAKf,EAAW,cAAcO,WAGjCG,MAAK,WAEJ,IAAMM,EAAQf,SAASC,cAAc,iBACrCe,EAAEC,MAAMC,YAAYH,GAAOI,QAC3BpB,EAAWqB,QACXC,aAAaC,QAAQ,OAAQ,cAKpBtB,SAASC,cAAc,WAC/BC,iBAAiB,SAAS,SAAAC,GAC/BA,EAAEC,iBACFnB,KAAKsC,WACL,EAAAxC,EAAAyC,kBACAH,aAAaC,QAAQ,OAAQ,YAI/B,IAAMG,EAAYzB,SAASC,cAAc,eACzCwB,EAAUvB,iBAAiB,UAAU,SAAAC,GACnCA,EAAEC,iBAGF,IAAMC,EAAQoB,EAAU,eAAenB,MACjCC,EAAWkB,EAAU,kBAAkBnB,MAG7CrB,KAAKyC,2BAA2BrB,EAAOE,GAAUE,MAAK,SAAAC,GAEpD,IAAMK,EAAQf,SAASC,cAAc,gBACrCe,EAAEC,MAAMC,YAAYH,GAAOI,QAC3BM,EAAUL,QACVC,aAAaC,QAAQ,OAAQ,c","sources":["src/js/auth.js"],"sourcesContent":["import { onClickHomeBtn } from './home-library-btns';\n\n// listen for auth status changes\nauth.onAuthStateChanged(user => {\n  if (user) {\n    db.collection('guides').onSnapshot(\n      snapshot => {\n        setupGuides(snapshot.docs);\n        setupUI(user);\n      },\n      err => console.log(err.message)\n    );\n  } else {\n    setupUI();\n    setupGuides([]);\n  }\n});\n\n// signup\nconst signupForm = document.querySelector('#signup-form');\nsignupForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  // get user info\n  const email = signupForm['signup-email'].value;\n  const password = signupForm['signup-password'].value;\n\n  // sign up the user & add firestore data\n  auth\n    .createUserWithEmailAndPassword(email, password)\n    .then(cred => {\n      return db.collection('users').doc(cred.user.uid).set({\n        bio: signupForm['signup-bio'].value,\n      });\n    })\n    .then(() => {\n      // close the signup modal & reset form\n      const modal = document.querySelector('#modal-signup');\n      M.Modal.getInstance(modal).close();\n      signupForm.reset();\n      localStorage.setItem('auth', 'true');\n    });\n});\n\n// logout\nconst logout = document.querySelector('#logout');\nlogout.addEventListener('click', e => {\n  e.preventDefault();\n  auth.signOut();\n  onClickHomeBtn();\n  localStorage.setItem('auth', 'false');\n});\n\n// login\nconst loginForm = document.querySelector('#login-form');\nloginForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  // get user info\n  const email = loginForm['login-email'].value;\n  const password = loginForm['login-password'].value;\n\n  // log the user in\n  auth.signInWithEmailAndPassword(email, password).then(cred => {\n    // close the signup modal & reset form\n    const modal = document.querySelector('#modal-login');\n    M.Modal.getInstance(modal).close();\n    loginForm.reset();\n    localStorage.setItem('auth', 'true');\n  });\n});\n"],"names":["$3faXO","parcelRequire","auth","onAuthStateChanged","user","db","collection","onSnapshot","snapshot","setupGuides","docs","setupUI","err","console","log","message","$a8c8b369db0e2137$var$signupForm","document","querySelector","addEventListener","e","preventDefault","email","value","password","createUserWithEmailAndPassword","then","cred","doc","uid","set","bio","modal","M","Modal","getInstance","close","reset","localStorage","setItem","signOut","onClickHomeBtn","$a8c8b369db0e2137$var$loginForm","signInWithEmailAndPassword"],"version":3,"file":"index.168a3e68.js.map"}